// Generated by CoffeeScript 1.6.3
(function() {
  var $;

  $ = jQuery;

  $.fn.extend({
    tumblrRandomPosts: function(options) {
      var log, settings;
      settings = {
        blogName: "yahoo.tumblr.com",
        appKey: "NOTHING",
        debug: false
      };
      settings = $.extend(settings, options);
      log = function(msg) {
        if (settings.debug) {
          return typeof console !== "undefined" && console !== null ? console.log(msg) : void 0;
        }
      };
      return this.each(function() {
        var self;
        self = this;
        $.ajax("http://api.tumblr.com/v2/blog/" + settings.blogName + "/posts?api_key=" + settings.appKey, {
          type: 'GET',
          dataType: 'jsonp',
          data: {
            get_param: 'value',
            type: 'text'
          },
          success: function(data, textStatus, jqXHR) {
            var random_number;
            console.log(data);
            random_number = Math.floor(Math.random() * data.response.total_posts);
            return $.ajax("http://api.tumblr.com/v2/blog/" + settings.blogName + "/posts?api_key=" + settings.appKey, {
              type: 'GET',
              dataType: 'jsonp',
              data: {
                get_param: 'value',
                offset: random_number,
                limit: '1',
                type: 'text'
              },
              success: function(data2, textStatus, jqXHR) {
                var content;
                content = data2.response.posts[0].body;
                $(self).append("<div>" + content + "</div>");
                return console.log(data2);
              }
            });
          }
        });
        return log("BlogName is: " + settings.blogName);
      });
    }
  });

}).call(this);
